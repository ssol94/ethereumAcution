<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="css/loginStyle.css">
	
	<script type="text/javascript" src="/js/jquery-1.4.2.min.js"></script>
	<script type="text/javascript" src="/js/login.js"></script>
</head>
<body>
<div class="form" id="form">
    <div class="field email">
        <div class="icon"></div><input class="input" id="id" type="id" placeholder="Id" autocomplete="off" /></div>
    <div class="field password">
        <div class="icon"></div>
        <input class="input" id="password" type="password" placeholder="Password" />
    </div>
    <button class="button" id="loginBtn" onclick="clickBtn()">LOGIN<div class="side-top-bottom"></div><div class="side-left-right"></div></button><small id="smallTxt"><%= user.id %></small></div>
    <script type="text/javascript">
    function clickBtn () {
        if (document.getElementById("id").value != '' || document.getElementById("password").value != '') {
            console.log('clickBtn')
            sendAjax('http://localhost:3000/login_confirm', document.getElementById("id").value, document.getElementById("password").value);
            /*
            document.getElementById("smallTxt").innerHTML = "all"
            if (document.getElementById("password").value == redisConn.redis_getValue(document.getElementById("id").value)) {
                console.log('비번 맞음')
            } else {
                console.log('비번 틀림')
            }*/
        }
    }
    function sendAjax(url, id, password) {
      var xmlHttpRequest = new XMLHttpRequest();
      xmlHttpRequest.open('POST', url);
      xmlHttpRequest.setRequestHeader('Content-Type', "application/json");
      console.log('sendAjax')
      xmlHttpRequest.send(id);

      xmlHttpRequest.addEventListener('load', function() {
        if (xmlHttpRequest.statusText != 'OK')  console.log('result not ok!');
        else console.log('result ok!');
      });
    }
    </script>
</body>
</html>